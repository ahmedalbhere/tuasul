<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†Ø§Ø·Ù‚ | ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¥Ù„Ù‰ Ù†Øµ</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#1a237e,#000);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:15px;
}

.container{
    background:#fff;
    width:100%;
    max-width:1100px;
    border-radius:20px;
    padding:20px;
    box-shadow:0 20px 40px rgba(0,0,0,.4);
}

h1{
    text-align:center;
    color:#1a237e;
    font-size:3em;
    margin-bottom:20px;
}

.main{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:15px;
}

.box{
    border:3px solid #1a237e;
    border-radius:15px;
    padding:15px;
    background:#f5f5f5;
}

.title{
    text-align:center;
    font-size:2em;
    margin-bottom:10px;
    color:#1a237e;
    font-weight:bold;
}

.text-screen{
    background:#fff;
    min-height:260px;
    border-radius:10px;
    padding:20px;
    font-size:2.2em;
    font-weight:bold;
    overflow-y:auto;
    border:2px solid #1a237e;
    animation:glow 2s infinite alternate;
}

@keyframes glow{
    from{box-shadow:inset 0 0 10px #1a237e}
    to{box-shadow:inset 0 0 20px gold}
}

.sign-screen{
    background:#1a237e;
    color:#fff;
    min-height:260px;
    border-radius:10px;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
}

.sign-emoji{
    font-size:6em;
    animation:float 3s infinite;
}

@keyframes float{
    0%,100%{transform:translateY(0)}
    50%{transform:translateY(-10px)}
}

.sign-text{
    margin-top:10px;
    font-size:2em;
    background:rgba(255,215,0,.2);
    padding:10px 20px;
    border-radius:30px;
}

.controls{
    margin-top:15px;
    display:flex;
    gap:10px;
    justify-content:center;
    flex-wrap:wrap;
}

button,select{
    font-size:1.6em;
    padding:12px 25px;
    border-radius:50px;
    border:none;
    cursor:pointer;
    font-weight:bold;
}

select{border:2px solid #1a237e}

.copy{background:#2196F3;color:#fff}
.clear{background:#ff9800;color:#fff}

.status{
    margin-top:15px;
    background:#e3f2fd;
    padding:10px;
    border-radius:40px;
    display:flex;
    justify-content:center;
    gap:20px;
    font-size:1.4em;
}

.led{
    width:14px;height:14px;border-radius:50%;
    background:#4CAF50;
    animation:blink 1.5s infinite;
}

@keyframes blink{
    50%{opacity:.4}
}

@media(max-width:768px){
    .main{grid-template-columns:1fr}
    h1{font-size:2.4em}
    .text-screen{font-size:1.8em}
}
</style>
</head>

<body>
<div class="container">
    <h1>ğŸ¤ Ù†ÙØ§Ø·ÙÙ‚</h1>

    <div class="main">
        <div class="box">
            <div class="title">ØµÙˆØª â†’ Ù†Øµ</div>
            <div class="text-screen" id="voiceText">ğŸ”Š Ø£Ù†Ø§ Ø£Ø³ØªÙ…Ø¹...</div>
            <select id="lang" style="width:100%;margin-top:10px">
                <option value="ar-SA">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                <option value="en-US">ğŸ‡ºğŸ‡¸ English</option>
            </select>
        </div>

        <div class="box">
            <div class="title">Ø¥Ø´Ø§Ø±Ø©</div>
            <div class="sign-screen">
                <div class="sign-emoji" id="signEmoji">ğŸ¤Ÿ</div>
                <div class="sign-text" id="signText">ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ÙƒÙ„Ø§Ù…...</div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="copy" id="copy">ğŸ“‹ Ù†Ø³Ø®</button>
        <button class="clear" id="clear">ğŸ§¹ Ù…Ø³Ø­</button>
    </div>

    <div class="status">
        <div><span class="led"></span> ğŸ¤ Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† ÙŠØ¹Ù…Ù„ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±</div>
    </div>
</div>

<script>
const voiceText = document.getElementById('voiceText');
const signEmoji = document.getElementById('signEmoji');
const signText = document.getElementById('signText');
const lang = document.getElementById('lang');

let finalText = '';
let recognition;
let restarting = false;

function textToSign(text){
    const map = {
        "Ù…Ø±Ø­Ø¨Ø§":"ğŸ‘‹","Ø³Ù„Ø§Ù…":"âœ‹","Ù†Ø¹Ù…":"ğŸ‘","Ù„Ø§":"ğŸ‘",
        "Ø´ÙƒØ±Ø§":"ğŸ™","Ø­Ø¨":"â¤ï¸","ØªÙ…Ø§Ù…":"ğŸ‘Œ","Ø£Ù†Ø§":"ğŸ‘†","Ø£Ù†Øª":"ğŸ‘‡"
    };
    for(let k in map){
        if(text.includes(k)){
            signEmoji.textContent = map[k];
            signText.textContent = k;
            return;
        }
    }
}

function startMic(){
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    if(!SR){alert("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†");return;}

    recognition = new SR();
    recognition.lang = lang.value;
    recognition.continuous = true;
    recognition.interimResults = true;

    recognition.onresult = e=>{
        let interim='';
        for(let i=e.resultIndex;i<e.results.length;i++){
            const t = e.results[i][0].transcript;
            if(e.results[i].isFinal){
                finalText+=t+' ';
                textToSign(t);
            }else interim+=t;
        }
        voiceText.textContent = finalText + interim;
    };

    recognition.onend = ()=>{
        if(!restarting){
            restarting=true;
            setTimeout(()=>{
                recognition.start();
                restarting=false;
            },300);
        }
    };

    recognition.start();
}

document.getElementById('copy').onclick=()=>{
    navigator.clipboard.writeText(voiceText.textContent);
};

document.getElementById('clear').onclick=()=>{
    finalText='';
    voiceText.textContent='ğŸ”Š Ø£Ù†Ø§ Ø£Ø³ØªÙ…Ø¹...';
    signEmoji.textContent='ğŸ¤Ÿ';
    signText.textContent='ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ÙƒÙ„Ø§Ù…...';
};

lang.onchange=()=>{
    recognition.lang=lang.value;
};

startMic();
</script>
</body>
</html>
